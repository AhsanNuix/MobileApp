{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { FontAwesome5 } from \"@expo/vector-icons\";\nimport styles from \"./style\";\nimport { Store } from \"../../contexts/context\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function QuantitySelector(props, _ref) {\n  var _ref$onPressDelete = _ref.onPressDelete,\n      onPressDelete = _ref$onPressDelete === void 0 ? function () {} : _ref$onPressDelete;\n\n  var _useState = useState(props.product.current),\n      _useState2 = _slicedToArray(_useState, 2),\n      qty = _useState2[0],\n      setQty = _useState2[1];\n\n  var _useContext = useContext(Store),\n      setCartArray = _useContext.setCartArray,\n      cartArray = _useContext.cartArray,\n      prod = _useContext.prod,\n      setProd = _useContext.setProd;\n\n  var _useState3 = useState(props.product.current),\n      _useState4 = _slicedToArray(_useState3, 2),\n      product = _useState4[0],\n      setProduct = _useState4[1];\n\n  useEffect(function () {\n    setProduct(props.product.current);\n  }, [props.product.current]);\n\n  var updateCart = function updateCart() {\n    setCartArray(cartArray.map(function (x) {\n      if (x.id === props.product.id) return props.product;\n      return x;\n    }));\n  };\n\n  var onPressAdd = function onPressAdd() {\n    props.product.current = props.product.current + 1;\n    setProduct(props.product.current);\n    updateCart();\n  };\n\n  var onPressMinus = function onPressMinus() {\n    props.product.current = props.product.current - 1;\n    setProduct(props.product.current);\n    updateCart();\n  };\n\n  var deleteFunction = function deleteFunction() {\n    if (product > 1) onPressMinus();else {\n      onPressDelete();\n      setCartArray(cartArray.filter(function (current) {\n        return !(current.id == props.product.id);\n      }));\n    }\n  };\n\n  var update = function update() {\n    setCartArray(cartArray.map(function (item) {\n      if (item.id === props.product.id) {\n        item.current = qty;\n        return props.product;\n      }\n\n      return item;\n    }));\n  };\n\n  return _jsxs(View, {\n    style: [styles.container, props.style],\n    children: [_jsx(Pressable, {\n      style: [styles.button, {\n        backgroundColor: \"#8dd9fc\"\n      }],\n      onPress: function onPress() {\n        return deleteFunction();\n      },\n      children: product == 1 ? _jsx(FontAwesome5, {\n        name: \"trash\",\n        size: 18,\n        color: \"#127cc0\"\n      }) : _jsx(FontAwesome5, {\n        name: \"minus\",\n        size: 18,\n        color: \"#127cc0\"\n      })\n    }), _jsx(View, {\n      style: styles.qtyView,\n      children: _jsx(Text, {\n        style: styles.buttonText,\n        children: props.product.current\n      })\n    }), _jsx(Pressable, {\n      style: styles.button,\n      onPress: onPressAdd,\n      children: _jsx(FontAwesome5, {\n        name: \"plus\",\n        size: 18,\n        color: \"white\"\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useContext","useEffect","FontAwesome5","styles","Store","QuantitySelector","props","onPressDelete","product","current","qty","setQty","setCartArray","cartArray","prod","setProd","setProduct","updateCart","map","x","id","onPressAdd","onPressMinus","deleteFunction","filter","update","item","container","style","button","backgroundColor","qtyView","buttonText"],"sources":["D:/Study/Smester 5/MobileApp-Development/Project/Servaid_Expo/src/components/quantitySelector/index.js"],"sourcesContent":["import { View, Text, Pressable } from \"react-native\";\r\nimport React, { useState, useContext, useEffect  } from \"react\";\r\nimport { FontAwesome5 } from \"@expo/vector-icons\";\r\nimport styles from \"./style\";\r\nimport { Store } from \"../../contexts/context\";\r\nexport default function QuantitySelector(props, {onPressDelete = () => {}}) {\r\n  const [qty, setQty] = useState(props.product.current);\r\n  const {setCartArray , cartArray , prod , setProd} =useContext(Store);\r\n\r\n\r\n  let [product, setProduct] = useState(props.product.current);\r\n\r\n  useEffect(() => {\r\n    setProduct(props.product.current);\r\n  }, [props.product.current]);\r\n\r\n  let updateCart = () => {\r\n    setCartArray(\r\n      cartArray.map((x) => {\r\n        if (x.id === props.product.id) return props.product;\r\n\r\n        return x;\r\n      })\r\n    );\r\n  };\r\n\r\n  let onPressAdd = () => {\r\n    props.product.current = props.product.current + 1;\r\n    setProduct(props.product.current);\r\n    updateCart();\r\n  };\r\n\r\n  let onPressMinus = () => {\r\n    props.product.current = props.product.current - 1;\r\n    setProduct(props.product.current);\r\n    updateCart();\r\n  };\r\n\r\n  let deleteFunction = () => {\r\n    if (product > 1) onPressMinus();\r\n    else {\r\n      onPressDelete();\r\n      setCartArray(\r\n        cartArray.filter(\r\n          (current) => !(current.id == props.product.id)\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n\r\n  \r\n  let update =()=>{  setCartArray(\r\n    cartArray.map((item) => {\r\n      if (item.id === props.product.id) {\r\n        item.current = qty;\r\n        \r\n        return props.product;\r\n      }\r\n      return item;\r\n    })\r\n  );\r\n};\r\n  \r\n  return (\r\n    <View style={[styles.container,props.style]}>\r\n      <Pressable\r\n        style={[styles.button, { backgroundColor: \"#8dd9fc\" }]}\r\n        onPress={() => deleteFunction()}\r\n      >\r\n        {product == 1 ? (\r\n          <FontAwesome5 name=\"trash\" size={18} color=\"#127cc0\" />\r\n        ) : (\r\n          <FontAwesome5 name=\"minus\" size={18} color=\"#127cc0\" />\r\n        )}\r\n      </Pressable>\r\n      <View style={styles.qtyView}>\r\n        <Text style={styles.buttonText}>{props.product.current}</Text>\r\n      </View>\r\n      <Pressable\r\n        style={styles.button}\r\n        onPress={onPressAdd}\r\n      >\r\n        <FontAwesome5 name=\"plus\" size={18} color=\"white\" />\r\n      </Pressable>\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}